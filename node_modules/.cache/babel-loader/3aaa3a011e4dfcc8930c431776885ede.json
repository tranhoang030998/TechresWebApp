{"ast":null,"code":"import _regeneratorRuntime from \"/Users/macbook/react-message-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/macbook/react-message-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/macbook/react-message-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/macbook/react-message-app/src/components/Compose/index.js\";\nimport React, { useState } from \"react\";\nimport \"./Compose.css\";\nimport { Input } from \"antd\";\nimport Axios from \"axios\";\nimport com from \"../../utils\";\nimport { useSelector } from \"react-redux\";\nexport default function Compose(props) {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      input = _useState2[0],\n      setInput = _useState2[1];\n\n  var currentConversation = useSelector(function (state) {\n    return state.profile.currentConversation;\n  });\n  var currentStatus = useSelector(function (state) {\n    return state.profile.currentStatus;\n  });\n\n  var handlePressEnter =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              if (!currentStatus) {\n                _context.next = 7;\n                break;\n              }\n\n              console.log(\"call api send msg\", input);\n              _context.next = 4;\n              return Axios.post(\"\".concat(com.root, \"/api/v1/chat:sendMessageToFacebook\"), {\n                staffId: localStorage.currentStaffId,\n                conversationId: currentConversation,\n                content: input\n              });\n\n            case 4:\n              setInput(\"\");\n              _context.next = 8;\n              break;\n\n            case 7:\n              window.alert(\"Please join the channel to send message!\");\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function handlePressEnter() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return React.createElement(\"div\", {\n    className: \"compose\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 29\n    },\n    __self: this\n  }, React.createElement(Input, {\n    type: \"text\",\n    className: \"compose-input\",\n    placeholder: \"Type a message, @name\",\n    onChange: function onChange(e) {\n      return setInput(e.target.value);\n    },\n    value: input,\n    onPressEnter: handlePressEnter,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 30\n    },\n    __self: this\n  }), props.rightItems);\n}","map":{"version":3,"sources":["/Users/macbook/react-message-app/src/components/Compose/index.js"],"names":["React","useState","Input","Axios","com","useSelector","Compose","props","input","setInput","currentConversation","state","profile","currentStatus","handlePressEnter","console","log","post","root","staffId","localStorage","currentStaffId","conversationId","content","window","alert","e","target","value","rightItems"],"mappings":";;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,OAAO,eAAP;AACA,SAASC,KAAT,QAAsB,MAAtB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,aAAhB;AACA,SAASC,WAAT,QAA4B,aAA5B;AAEA,eAAe,SAASC,OAAT,CAAiBC,KAAjB,EAAwB;AAAA,kBACXN,QAAQ,CAAC,EAAD,CADG;AAAA;AAAA,MAC9BO,KAD8B;AAAA,MACvBC,QADuB;;AAErC,MAAMC,mBAAmB,GAAGL,WAAW,CACrC,UAACM,KAAD;AAAA,WAAWA,KAAK,CAACC,OAAN,CAAcF,mBAAzB;AAAA,GADqC,CAAvC;AAGA,MAAMG,aAAa,GAAGR,WAAW,CAAC,UAACM,KAAD;AAAA,WAAWA,KAAK,CAACC,OAAN,CAAcC,aAAzB;AAAA,GAAD,CAAjC;;AAEA,MAAMC,gBAAgB;AAAA;AAAA;AAAA;AAAA;AAAA,6BAAG;AAAA;AAAA;AAAA;AAAA;AAAA,mBACnBD,aADmB;AAAA;AAAA;AAAA;;AAErBE,cAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAiCR,KAAjC;AAFqB;AAAA,qBAGfL,KAAK,CAACc,IAAN,WAAcb,GAAG,CAACc,IAAlB,yCAA4D;AAChEC,gBAAAA,OAAO,EAAEC,YAAY,CAACC,cAD0C;AAEhEC,gBAAAA,cAAc,EAAEZ,mBAFgD;AAGhEa,gBAAAA,OAAO,EAAEf;AAHuD,eAA5D,CAHe;;AAAA;AAQrBC,cAAAA,QAAQ,CAAC,EAAD,CAAR;AARqB;AAAA;;AAAA;AAUrBe,cAAAA,MAAM,CAACC,KAAP,CAAa,0CAAb;;AAVqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAhBX,gBAAgB;AAAA;AAAA;AAAA,KAAtB;;AAaA,SACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,KAAD;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,SAAS,EAAC,eAFZ;AAGE,IAAA,WAAW,EAAC,uBAHd;AAIE,IAAA,QAAQ,EAAE,kBAACY,CAAD;AAAA,aAAOjB,QAAQ,CAACiB,CAAC,CAACC,MAAF,CAASC,KAAV,CAAf;AAAA,KAJZ;AAKE,IAAA,KAAK,EAAEpB,KALT;AAME,IAAA,YAAY,EAAEM,gBANhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAUGP,KAAK,CAACsB,UAVT,CADF;AAcD","sourcesContent":["import React, { useState } from \"react\";\nimport \"./Compose.css\";\nimport { Input } from \"antd\";\nimport Axios from \"axios\";\nimport com from \"../../utils\";\nimport { useSelector } from \"react-redux\";\n\nexport default function Compose(props) {\n  const [input, setInput] = useState(\"\");\n  const currentConversation = useSelector(\n    (state) => state.profile.currentConversation\n  );\n  const currentStatus = useSelector((state) => state.profile.currentStatus);\n\n  const handlePressEnter = async () => {\n    if (currentStatus) {\n      console.log(\"call api send msg\", input);\n      await Axios.post(`${com.root}/api/v1/chat:sendMessageToFacebook`, {\n        staffId: localStorage.currentStaffId,\n        conversationId: currentConversation,\n        content: input,\n      });\n      setInput(\"\");\n    } else {\n      window.alert(\"Please join the channel to send message!\");\n    }\n  };\n  return (\n    <div className=\"compose\">\n      <Input\n        type=\"text\"\n        className=\"compose-input\"\n        placeholder=\"Type a message, @name\"\n        onChange={(e) => setInput(e.target.value)}\n        value={input}\n        onPressEnter={handlePressEnter}\n      />\n\n      {props.rightItems}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}